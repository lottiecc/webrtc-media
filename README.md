# WebRTC

## 启动
全局安装http-server，在项目目录下执行http-server命令。

## 1对1音视频实时对话示意
- WebRTC终端:音视频采集、编解码、NAT穿越、音视频数据传输。
- Signal服务器：信令处理（加入房间、离开房间、媒体协商消息的传递等）
- STUN/TURN服务器：获取WebRTC终端在公网的IP，以及NAT穿越失败后的数据中转

## 音视频采集基本概念
- 摄像头：捕捉图像和视频
- 帧率
- 分辨率
- 宽高比：16:9（显示器）, 4:3（黑白电视）
- 麦克风：采样率、采样位深（采样大小）
- 轨：音频轨、视频轨分开存储
- 流：媒体流（存放音频轨或视频轨）、数据流


## 音视频采集

### getUserMedia方法
### MediaStreamConstraints参数

## 音视频设备的基本原理
### 音频设备
采集音频数据的本质是模数转换，即将模拟信号转换为数字信号。

#### 奈奎斯特定理
模数转换中，当采样率大于信号中最高频率的2倍时，原始信号会被完整保留。

人类听觉频率范围是20Hz~20kHz，需要将采样率设置在40kHz以上，才能将原始信号完整保留。

采集到的数据经过量化、编码，最终形成数字信号，这是音频设备的工作。
采样大小（保存每个采样的二进制位个数）决定最大值：采样大小是8位，最大值是2∧8-1，即255。

### 视频设备
光学传感器，将光转为数字信号，即RGB数据。
获取RGB后，通过DSP进行自动增强、白平衡、色彩饱和等优化处理。

通过DSP处理后，会得到24位真彩色图片。

最终图像数据要进行压缩、传输。
编码器一般使用的输入格式为YUV 1420，所以摄像头内部有专门模块将RGB图像转为YUV格式的图像。

YUV，色彩编码方式，主要用于电视系统以及模拟视频领域。
亮度信息（Y）与色彩信息（UV），没有UV则为黑白，解决彩色电视和黑白电视兼容问题。

## WebRTC设备管理的基本概念
### MediaDevices
提供访问媒体设备（摄像头、麦克风）方法

### MediaDeviceInfo
输入/输出设备的信息
- deviceID，设备的唯一标记
- label，设备名称（权限，指纹识别）
- kind，设备种类




